================================================================================
                    ESTRUTURA DETALHADA DO BANCO DE DADOS
                          API CRUD MERCOCAMP v3.1.0
================================================================================

DATABASE: dbrecebimento
HOST: mercocamp.ip.odhserver.com
PORT: 33101
CHARSET: utf8mb4
ENGINE: MySQL

================================================================================
                                 TABELAS
================================================================================

ğŸ“‹ TOTAL DE TABELAS: 2
   â€¢ agendamento
   â€¢ produtos

================================================================================
                            TABELA: agendamento
================================================================================

DESCRIÃ‡ÃƒO: Controle de agendamentos com histÃ³rico de alteraÃ§Ãµes
CHAVE PRIMÃRIA: ID (varchar)
TOTAL DE CAMPOS: 8

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ESTRUTURA DOS CAMPOS                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ CAMPO       â”‚ TIPO          â”‚ NULL     â”‚ KEY     â”‚ DEFAULT                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ID          â”‚ varchar(50)   â”‚ NO       â”‚         â”‚ AUTO_INCREMENT           â”‚
â”‚ NUM         â”‚ tinyint       â”‚ NO       â”‚         â”‚ 0                        â”‚
â”‚ CHNFE       â”‚ int           â”‚ NO       â”‚         â”‚ NULL                     â”‚
â”‚ CLI         â”‚ int           â”‚ NO       â”‚         â”‚ NULL                     â”‚
â”‚ VOL         â”‚ int           â”‚ NO       â”‚         â”‚ NULL                     â”‚
â”‚ DATA        â”‚ date          â”‚ NO       â”‚         â”‚ NULL                     â”‚
â”‚ STATUS      â”‚ varchar(20)   â”‚ NO       â”‚         â”‚ 0                        â”‚
â”‚ HIST        â”‚ json          â”‚ NO       â”‚         â”‚ NULL                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DESCRIÃ‡ÃƒO DOS CAMPOS:
â€¢ ID: Identificador Ãºnico do agendamento (chave primÃ¡ria)
â€¢ NUM: NÃºmero sequencial do agendamento
â€¢ CHNFE: Chave da Nota Fiscal EletrÃ´nica (44 dÃ­gitos)
â€¢ CLI: CÃ³digo do cliente
â€¢ VOL: Volume/quantidade de itens
â€¢ DATA: Data do agendamento (formato: YYYY-MM-DD)
â€¢ STATUS: Status do agendamento (ATIVO, INATIVO, CONCLUIDO, etc.)
â€¢ HIST: HistÃ³rico de alteraÃ§Ãµes em formato JSON

CAMPOS OBRIGATÃ“RIOS:
âœ“ ID, NUM, CHNFE, CLI, VOL, DATA, STATUS, HIST

VALIDAÃ‡Ã•ES ESPECÃFICAS:
â€¢ DATA: Deve estar no formato YYYY-MM-DD
â€¢ HIST: Deve ser um JSON vÃ¡lido com estrutura de histÃ³rico
â€¢ STATUS: Aceita valores como 'ATIVO', 'INATIVO', 'CONCLUIDO'
â€¢ ID: Deve ser Ãºnico, mÃ¡ximo 50 caracteres

ESTRUTURA DO CAMPO HIST (JSON):
{
  "data": "2024-01-15 10:30:00",
  "usuario": "admin",
  "alteracao": {
    "acao": "CRIACAO" | "ALTERACAO",
    "campos_criados": { ... },
    "mudancas": { "campo": "valor_antigo -> valor_novo" }
  }
}

================================================================================
                             TABELA: produtos
================================================================================

DESCRIÃ‡ÃƒO: Cadastro de produtos com informaÃ§Ãµes de fornecedor
CHAVE PRIMÃRIA: cod_int (varchar)
TOTAL DE CAMPOS: 4

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ESTRUTURA DOS CAMPOS                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ CAMPO       â”‚ TIPO          â”‚ NULL     â”‚ KEY     â”‚ DEFAULT                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ cod_int     â”‚ varchar(50)   â”‚ NO       â”‚         â”‚ ""                       â”‚
â”‚ cnpj_int    â”‚ varchar(14)   â”‚ NO       â”‚         â”‚ ""                       â”‚
â”‚ cod_forn    â”‚ varchar(50)   â”‚ NO       â”‚         â”‚ ""                       â”‚
â”‚ cnpj_forn   â”‚ varchar(14)   â”‚ NO       â”‚         â”‚ ""                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DESCRIÃ‡ÃƒO DOS CAMPOS:
â€¢ cod_int: CÃ³digo interno do produto (chave primÃ¡ria)
â€¢ cnpj_int: CNPJ da empresa interna (14 dÃ­gitos)
â€¢ cod_forn: CÃ³digo do fornecedor
â€¢ cnpj_forn: CNPJ do fornecedor (14 dÃ­gitos)

CAMPOS OBRIGATÃ“RIOS:
âœ“ cod_int, cnpj_int, cod_forn, cnpj_forn

VALIDAÃ‡Ã•ES ESPECÃFICAS:
â€¢ cnpj_int: Deve conter exatamente 14 dÃ­gitos numÃ©ricos
â€¢ cnpj_forn: Deve conter exatamente 14 dÃ­gitos numÃ©ricos
â€¢ cod_int: Deve ser Ãºnico, mÃ¡ximo 50 caracteres
â€¢ cod_forn: MÃ¡ximo 50 caracteres

LIMPEZA AUTOMÃTICA:
â€¢ CNPJs: Caracteres especiais (., /, -) sÃ£o removidos automaticamente
â€¢ ValidaÃ§Ã£o: Verifica se contÃ©m exatamente 14 dÃ­gitos apÃ³s limpeza

================================================================================
                            OPERAÃ‡Ã•ES DISPONÃVEIS
================================================================================

ğŸ“‹ OPERAÃ‡Ã•ES CRUD:
â€¢ CREATE: Inserir novos registros
â€¢ READ: Consultar registros existentes
â€¢ UPDATE: Atualizar registros existentes
â€¢ DELETE: Excluir registros especÃ­ficos

ğŸ”’ OPERAÃ‡Ã•ES BLOQUEADAS (SEGURANÃ‡A):
â€¢ DROP TABLE: Excluir tabelas
â€¢ ALTER TABLE: Modificar estrutura
â€¢ TRUNCATE: Apagar todos os registros
â€¢ CREATE TABLE: Criar novas tabelas

âœ… OPERAÃ‡Ã•ES PERMITIDAS:
â€¢ SELECT: Consultas de dados
â€¢ INSERT: InserÃ§Ã£o de registros
â€¢ UPDATE: AtualizaÃ§Ã£o com WHERE obrigatÃ³rio
â€¢ DELETE: ExclusÃ£o com WHERE obrigatÃ³rio

================================================================================
                               ENDPOINTS DA API
================================================================================

ğŸ“ ENDPOINTS ESPECÃFICOS POR TABELA:

AGENDAMENTO:
â€¢ GET /table/agendamento - Listar agendamentos
â€¢ GET /table/agendamento/structure - Estrutura da tabela
â€¢ GET /table/agendamento/<ID> - Buscar por ID
â€¢ POST /table/agendamento - Criar novo (requer user_id)
â€¢ PUT /table/agendamento/<ID> - Atualizar (requer user_id)
â€¢ DELETE /table/agendamento/<ID> - Excluir agendamento

PRODUTOS:
â€¢ GET /table/produtos - Listar produtos
â€¢ GET /table/produtos/structure - Estrutura da tabela
â€¢ GET /table/produtos/<cod_int> - Buscar por cÃ³digo
â€¢ POST /table/produtos - Criar novo produto
â€¢ PUT /table/produtos/<cod_int> - Atualizar produto
â€¢ DELETE /table/produtos/<cod_int> - Excluir produto

================================================================================
                            EXEMPLOS DE REGISTROS
================================================================================

EXEMPLO - AGENDAMENTO:
{
  "ID": "AGE001",
  "NUM": 1,
  "CHNFE": 123456789,
  "CLI": 1001,
  "VOL": 5,
  "DATA": "2024-01-15",
  "STATUS": "ATIVO",
  "HIST": {
    "data": "2024-01-15 10:30:00",
    "usuario": "admin",
    "alteracao": {
      "acao": "CRIACAO",
      "campos_criados": {
        "ID": "AGE001",
        "CLI": 1001,
        "VOL": 5
      }
    }
  }
}

EXEMPLO - PRODUTOS:
{
  "cod_int": "PROD001",
  "cnpj_int": "12345678000195",
  "cod_forn": "FORN001",
  "cnpj_forn": "98765432000111"
}

================================================================================
                                 OBSERVAÃ‡Ã•ES
================================================================================

ğŸ” SEGURANÃ‡A:
â€¢ Dupla validaÃ§Ã£o: API + Database level
â€¢ Comandos perigosos bloqueados
â€¢ WHERE obrigatÃ³rio em UPDATE/DELETE
â€¢ Logs de auditoria no campo HIST

ğŸ“Š PERFORMANCE:
â€¢ Ãndices automÃ¡ticos nas chaves primÃ¡rias
â€¢ Limite padrÃ£o de 100 registros por consulta
â€¢ Consultas otimizadas com prepared statements

ğŸ› ï¸ MANUTENÃ‡ÃƒO:
â€¢ Backup recomendado antes de alteraÃ§Ãµes
â€¢ Logs de erro detalhados
â€¢ Monitoramento via endpoints /health e /debug

ğŸ“… CRIADO EM: 2025-07-08
ğŸ“ VERSÃƒO: 3.1.0
ğŸ‘¤ PROJETO: Mercocamp - Sistema de Agendamento

================================================================================
                                   FIM
================================================================================ 